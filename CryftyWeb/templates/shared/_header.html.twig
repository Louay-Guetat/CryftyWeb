<style>

    .container-wa .floating-button {
        position: fixed;
        bottom: 10px;
        right: 12px;
        width: 60px;
        height: 60px;
        background-color: #6164ff;
        color: white;
        border-radius: 50px;
        text-align: center;
        font-size: 35px;
        cursor: pointer;
        box-shadow: 0px 2px 5px #666;
        z-index: 1000;
    }
    .container-wa .floating-button:hover {
        background-color: #6164ff;
    }
    .container-wa .floating-button .icon {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        line-height: 60px;
        text-align: center;
        transition: all 0.3s;
    }
    .container-wa .floating-button .icon.wa {
        animation: wa-out 0.3s;
    }
    .container-wa .floating-button .icon.close {
        opacity: 0;
        margin: auto;
        transform: rotateZ(-70deg);
        animation: close-out 0.3s;
    }
    .container-wa .card {
        font-family: 'Quicksand', sans-serif;
        position: absolute;
        width: 280px;
        height: 400px;
        overflow-y: scroll;
        background-color:white;
        border-radius: 5px;
        right: 40px;
        bottom: 88px;
        display: none;
        border:1px solid rgba(0, 0, 0, 0.15);
        z-index: 10000;
    }
    .container-wa .card .banner-header {

        background-size: cover;
        color: white;

        background-color: #075e54;
    }
    .container-wa .card .banner-body {
        flex-grow: 1;
        background-color: #eaeaea;
        padding: 15px;
    }
    .container-wa .card .banner-body .card-atendente {
        margin-top: -50px;
        background-color: white;
        padding: 15px;
        display: flex;
        flex-direction: column;
        border-radius: 15px;
    }
    .container-wa .card .banner-body .card-atendente .dados-atendente {
        display: flex;
    }
    .container-wa .card .banner-body .card-atendente .dados-atendente .avatar {
        padding: 15px;
    }
    .container-wa .card .banner-body .card-atendente .dados-atendente .avatar img {
        border-radius: 50%;
    }
    .container-wa .card .banner-body .card-atendente .dados-atendente .informacoes {
        padding: 15px;
    }
    .container-wa .card .banner-body .card-atendente .botao-atendente {
        display: flex;
    }
    .container-wa .card .banner-body .card-atendente .botao-atendente .btn {
        color: white;
        background-color: #6164ff;
        border-radius: 15px;
        width: 100%;
        padding: 10px;
        text-align: center;
        text-decoration: none;
    }
    .container-wa.is-opened .icon.wa {
        animation: wa-in 0.15s linear;
        animation-fill-mode: forwards;
    }
    .container-wa.is-opened .icon.close {
        animation: close-in 0.2s;
        animation-delay: 0.1s;
        animation-fill-mode: forwards;
    }
    .container-wa.is-opened .card {
        display: flex;
        flex-direction: column;
        position: fixed;
    }

    .container-wa.is-opened .icon.wa {
        animation: wa-in 0.15s linear;
        animation-fill-mode: forwards;
    }

    .container-wa.is-opened .icon.close {
        animation: close-in 0.2s;
        animation-delay: 0.1s;
        animation-fill-mode: forwards;
    }

    @keyframes close-in {
        from {
            opacity: 0;
            transform: rotateZ(-70deg);
        }
        to {
            opacity: 1;
            transform: rotateZ(0deg);
        }
    }
    @keyframes close-out {
        from {
            opacity: 1;
            transform: rotateZ(0deg);
        }
        to {
            opacity: 0;
            transform: rotateZ(-70deg);
        }
    }
    @keyframes wa-in {
        from {
            opacity: 1;
            transform: rotateZ(0deg);
        }
        to {
            opacity: 0;
            transform: rotateZ(180deg);
        }
    }
    @keyframes wa-out {
        from {
            opacity: 0;
            transform: rotateZ(180deg);
        }
        to {
            opacity: 1;
            transform: rotateZ(0deg);
        }
    }
</style>
<header class="header">
    <div class="header__content">
        <div class="header__logo">
            <a href="{{ path ('nft') }}">
                <img src="{{ asset('img/logoNoText.png') }}" width="50" height="50" alt="">
            </a>
        </div>

        <form action="#" class="header__search">
            <input type="text" placeholder="Search items, collections, and creators">
            <button type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"></path></svg></button>
            <button type="button" class="close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z"></path></svg></button>
        </form>

        <div class="header__menu">
            <ul class="header__nav">
                <li class="header__nav-item">
                    <a class="header__nav-link" href="{{ path ('nft') }}" role="button"  aria-haspopup="true" aria-expanded="false">Home<path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></a>
                </li>
                <li class="header__nav-item">
                    <a class="header__nav-link" href="{{ path ('AfficheNft') }}" role="button"  aria-haspopup="true" aria-expanded="false">Explore <path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></a>
                </li>
                <li class="header__nav-item">
                    <a class="header__nav-link" href="#" role="button" id="dropdownMenuHome" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Rankings <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></svg></a>

                    <ul class="dropdown-menu header__nav-menu" aria-labelledby="dropdownMenuHome">

                        <li><a href="{{ path ('rankings-list') }}">Crypto Currency</a></li>

                    </ul>
                </li>

                <li class="header__nav-item">
                    <a class="header__nav-link" href="{{ path('AfficheBA') }}" role="button" aria-haspopup="true" aria-expanded="false">Blogs <path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></a>
                </li>
                <li class="header__nav-item">
                    <a class="header__nav-link" href="#" role="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Rankings <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></svg></a>

                    <ul class="dropdown-menu header__nav-menu" aria-labelledby="dropdownMenu1">
                        <li><a href="{{ path('nftRanking') }}">Nft Ranking</a></li>
                        <li><a href="{{ path('rankings-list') }}">Crypto Ranking</a></li>
                    </ul>
                </li>
                {% if is_granted('IS_AUTHENTICATED_REMEMBERED')  %}

                    <li class="header__nav-item">
                    <a class="header__nav-link" href="/cart/panier" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-shopping-cart" style="color: white;size: 60px"></i>
                        <div style="border-radius: 40px;margin-top:20px;background-color: darkred;color: white;size: 5px">&nbsp;
                    {% if  app.session.get('nbNft')  > 0 %}
                            {{ app.session.get('nbNft') }} &nbsp;
                            {% else %} 0 &nbsp; {% endif %}
                        </div>Panier</a>
                </li>
                {% else %}
                <li class="header__nav-item">
                    <a class="header__nav-link" href="/panier" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-shopping-cart" style="color: white;size: 60px"></i>
                    <div style="border-radius: 40px;margin-top:20px;background-color: darkred;color: white;size: 5px">&nbsp;
                        {% if  app.session.get('nbNft')  > 0 %}
                        {{ app.session.get('nbNft') }} &nbsp;
                        {% else %} 0 &nbsp; {% endif %}
                    </div>Panier</a>
                </li>
                {% endif %}
                <li class="header__nav-item">
                    <a class="header__nav-link" href="/transaction/afficheTransaction/" role="button" aria-haspopup="true" aria-expanded="false">Transaction</a>

                </li>

                <li class="header__nav-item">
                    <a class="header__nav-link header__nav-link--menu" href="#" role="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,10a2,2,0,1,0,2,2A2,2,0,0,0,12,10ZM5,10a2,2,0,1,0,2,2A2,2,0,0,0,5,10Zm14,0a2,2,0,1,0,2,2A2,2,0,0,0,19,10Z"></path></svg></a>

                    <ul class="dropdown-menu header__nav-menu" aria-labelledby="dropdownMenu2">
                        <li><a href="signin.html">Sign in</a></li>
                        <li><a href="signup.html">Sign up</a></li>
                        <li><a href="forgot.html">Forgot password</a></li>
                        <li><a href="404.html">404 Page</a></li>
                        <li><a href="privacy.html">Privacy policy</a></li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="header__actions">
            <div class="header__action header__action--search">
                <button class="header__action-btn" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z"></path></svg></button>
            </div>

{% if not is_granted('IS_AUTHENTICATED_REMEMBERED')  %}

            <div class="header__action header__action--signin">
                <a class="header__action-btn header__action-btn--signin" href="{{ path ('app_login') }}">
                    <span>Sign in</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,12a1,1,0,0,0-1-1H11.41l2.3-2.29a1,1,0,1,0-1.42-1.42l-4,4a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l4,4a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L11.41,13H19A1,1,0,0,0,20,12ZM17,2H7A3,3,0,0,0,4,5V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V16a1,1,0,0,0-2,0v3a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V8a1,1,0,0,0,2,0V5A3,3,0,0,0,17,2Z"></path></svg>
                </a>
            </div>

{% else %}
    <div class="header__action header__action--profile">
        <a class="header__profile-btn header__profile-btn--verified" href="#" role="button" id="dropdownMenuProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

            <img src="{{ asset("uploads/avatar/"~ app.user.avatar) }}" alt="">
            <div><p>{{ app.user.username }}</p>
                <span>

                    {% if user_wallet.findOneBy({'client' : app.user.id,'isMain': true}) is not null %}
                    {{ user_wallet.findOneBy({'client' : app.user.id,'isMain': true}).balance }}
                    {{ user_wallet.findOneBy({'client' : app.user.id,'isMain': true}).nodeId.coinCode }}
                    {% else %}
                    <small class="text-danger">no Wallet</small>
                    {% endif %}
                </span></div>

            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z"></path></svg>
        </a>

        <ul class="dropdown-menu header__profile-menu" aria-labelledby="dropdownMenuProfile" style="">
            <li><a href="{{ path('client-profil',{'id':app.user.id}) }}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.71,12.71a6,6,0,1,0-7.42,0,10,10,0,0,0-6.22,8.18,1,1,0,0,0,2,.22,8,8,0,0,1,15.9,0,1,1,0,0,0,1,.89h.11a1,1,0,0,0,.88-1.1A10,10,0,0,0,15.71,12.71ZM12,12a4,4,0,1,1,4-4A4,4,0,0,1,12,12Z"></path></svg> <span>Profile</span></a></li>
            <li><a href="{{ path('Mreclamation',{'id':app.user.id}) }}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,13H4a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h6a1,1,0,0,0,1-1V14A1,1,0,0,0,10,13ZM9,19H5V15H9ZM20,3H14a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h6a1,1,0,0,0,1-1V4A1,1,0,0,0,20,3ZM19,9H15V5h4Zm1,7H18V14a1,1,0,0,0-2,0v2H14a1,1,0,0,0,0,2h2v2a1,1,0,0,0,2,0V18h2a1,1,0,0,0,0-2ZM10,3H4A1,1,0,0,0,3,4v6a1,1,0,0,0,1,1h6a1,1,0,0,0,1-1V4A1,1,0,0,0,10,3ZM9,9H5V5H9Z"></path></svg> <span>RÃ©clamations</span></a></li>
            <li><a href="author.html"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.9,12.66a1,1,0,0,1,0-1.32L21.18,9.9a1,1,0,0,0,.12-1.17l-2-3.46a1,1,0,0,0-1.07-.48l-1.88.38a1,1,0,0,1-1.15-.66l-.61-1.83A1,1,0,0,0,13.64,2h-4a1,1,0,0,0-1,.68L8.08,4.51a1,1,0,0,1-1.15.66L5,4.79A1,1,0,0,0,4,5.27L2,8.73A1,1,0,0,0,2.1,9.9l1.27,1.44a1,1,0,0,1,0,1.32L2.1,14.1A1,1,0,0,0,2,15.27l2,3.46a1,1,0,0,0,1.07.48l1.88-.38a1,1,0,0,1,1.15.66l.61,1.83a1,1,0,0,0,1,.68h4a1,1,0,0,0,.95-.68l.61-1.83a1,1,0,0,1,1.15-.66l1.88.38a1,1,0,0,0,1.07-.48l2-3.46a1,1,0,0,0-.12-1.17ZM18.41,14l.8.9-1.28,2.22-1.18-.24a3,3,0,0,0-3.45,2L12.92,20H10.36L10,18.86a3,3,0,0,0-3.45-2l-1.18.24L4.07,14.89l.8-.9a3,3,0,0,0,0-4l-.8-.9L5.35,6.89l1.18.24a3,3,0,0,0,3.45-2L10.36,4h2.56l.38,1.14a3,3,0,0,0,3.45,2l1.18-.24,1.28,2.22-.8.9A3,3,0,0,0,18.41,14ZM11.64,8a4,4,0,1,0,4,4A4,4,0,0,0,11.64,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,11.64,14Z"></path></svg> <span>Settings</span></a></li>
            <li><a href="{{ path('app_logout') }}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,12a1,1,0,0,0,1,1h7.59l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l4-4a1,1,0,0,0,.21-.33,1,1,0,0,0,0-.76,1,1,0,0,0-.21-.33l-4-4a1,1,0,1,0-1.42,1.42L12.59,11H5A1,1,0,0,0,4,12ZM17,2H7A3,3,0,0,0,4,5V8A1,1,0,0,0,6,8V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V16a1,1,0,0,0-2,0v3a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V5A3,3,0,0,0,17,2Z"></path></svg> <span>Sign out</span></a></li>
            <li><a href="{{ path('Contact_add') }}">Contact</a></li>
        </ul>
    </div>
{% endif %}
        </div>


        <button class="header__btn" type="button">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>

{% if is_granted('IS_AUTHENTICATED_FULLY') %}

<div class="container-wa">
    <div class="card">
        <div class="mb-2">
        <span class="fw-5 h6">Your Chats</span> <a href="#" class="btn btn-primary btn-sm">Add New Group</a>
        </div>

        {% set groups = chat_group.findAll()  %}
        {% set privates = chat_private.UsersContacter(app.user.id) %}
        <div>
            <ul class="list-group">
                {% for private in privates %}
                    <li style="width: 230px;" class="list-group-item ">
                        <a href="{{path('chat',{'id':gr.id}) }}" class="hover">
                            <img class="rounded-circle" width="30" height="30"
                                 src="{{ asset('uploads/walletImages/defaultImage.png') }}"/>
                            {% if private.Sender.id ==app.user.id %}
                                {{  private.Received.Username }}
                            {% else %}
                                {{ private.Sender.Username }}
                            {% endif %}
                        </a>
                    </li>
                {% endfor %}


                {% for gr in groups %}
                    {% if app.user.id == gr.owner.id  %}
                <li style="width: 230px;" class="list-group-item ">
                    <a href="{{path('chat',{'id':gr.id}) }}" class="hover">
                        <img class="rounded-circle" width="30" height="30"
                             src="{{ asset('uploads/walletImages/defaultImage.png') }}"/>
                        {{ gr.nom }}
                    </a>
                </li>
                    {% endif %}
                {% endfor %}

                {% for gr in groups %}

                        {% if app.user in gr.getParticipants  %}
                <li style="width: 230px;" class="list-group-item ">
                    <a href="{{path('chat',{'id':gr.id}) }}" class="hover">
                        <img class="rounded-circle" width="30" height="30"
                             src="{{ asset('uploads/walletImages/defaultImage.png') }}"/>
                        {{ gr.nom }}
                    </a>
                </li>
                        {% endif %}
                {% endfor %}

            </ul>
        </div>
    </div>
    <div class="floating-button">
        <i class="fa fa-comments icon wa"></i>
        <i style="color:#fff;" class="fa fa-times icon close"></i>

    </div>
</div>
{% endif %}

